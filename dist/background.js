function extractChatContent(){const e=document.querySelector("main");if(!e)return console.error("Main container not found"),"";const t=e.querySelector("div.flex.flex-col.gap-4");let n=(t?t.innerText:e.innerText).split("\n").map((e=>e.trim())).filter((e=>e.length>0));const o=["Share","Search","Reason","ChatGPT can make mistakes. Check important info.","4o"];n=n.filter((e=>!o.some((t=>e.includes(t)))));const r=n.join("\n\n");return console.log("Filtered conversation:",r),r}function pasteContent(e){navigator.clipboard.writeText(e).then((()=>{alert("Content copied to clipboard! Please press Ctrl+V in the Google Doc to paste.")})).catch((e=>{console.error("Failed to copy text: ",e)}))}chrome.runtime.onMessage.addListener(((e,t,n)=>("exportChat"===e.action&&chrome.tabs.query({active:!0,currentWindow:!0},(e=>{if(0===e.length)return;const t=e[0];chrome.scripting.executeScript({target:{tabId:t.id},func:extractChatContent},(e=>{if(e&&e[0]&&e[0].result){const t=e[0].result;chrome.tabs.create({url:"https://docs.google.com/document/create"},(e=>{setTimeout((()=>{chrome.scripting.executeScript({target:{tabId:e.id},func:pasteContent,args:[t]})}),5e3)}))}}))})),!0)));